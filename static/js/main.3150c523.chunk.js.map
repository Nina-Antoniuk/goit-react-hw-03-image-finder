{"version":3,"sources":["components/Searchbar/Searchbar.js","services/pixabay.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["Searchbar","state","searchValue","getSearchValue","e","setState","target","value","submitSearchValue","preventDefault","props","onSubmit","reset","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","FetchPhotos","base_url","api_key","_searchQuery","_page","newPage","a","axios","defaults","baseURL","get","searchQuery","page","response","data","toast","error","toastId","uuid","ImageGalleryItem","openModal","getImage","largeImage","preiew","desc","onClick","src","alt","default","Button","loadMore","Modal","handleEscape","code","switcher","handleClose","currentTarget","window","addEventListener","removeEventListener","createPortal","children","document","getElementById","newFetchPhotos","ImageGallery","searchResults","status","showModal","activeImage","fetchPhotos","then","prevState","hits","scrollTo","top","querySelector","scrollHeight","behavior","toggleModal","getTarget","dataset","source","prevProps","prevValue","currentValue","result","catch","err","color","height","width","length","map","id","webformatURL","largeImageURL","tags","App","handleSubmit","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.3150c523.chunk.js","sourcesContent":["import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass Searchbar extends Component {\n  state = {\n    searchValue: '',\n  };\n\n  getSearchValue = e => {\n    this.setState({\n      searchValue: e.target.value,\n    });\n  };\n\n  submitSearchValue = e => {\n    e.preventDefault();\n\n    this.props.onSubmit(this.state.searchValue);\n    this.reset();\n  };\n\n  reset = () => {\n    this.setState({\n      searchValue: '',\n    });\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.submitSearchValue}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.searchValue}\n            onChange={this.getSearchValue}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func,\n};\n\nexport default Searchbar;\n","import axios from 'axios';\nimport { toast } from 'react-toastify';\nimport { v1 as uuid } from 'uuid';\n\nclass FetchPhotos {\n  constructor(base_url, api_key) {\n    this.base_url = base_url;\n    this.api_key = api_key;\n    this._searchQuery = '';\n    this._page = 1;\n  }\n\n  get searchQuery() {\n    return this._searchQuery;\n  }\n\n  set searchQuery(value) {\n    return (this._searchQuery = value);\n  }\n\n  get page() {\n    return this._page;\n  }\n\n  set page(newPage) {\n    return (this._page = newPage);\n  }\n\n  async fetchPhotos() {\n    axios.defaults.baseURL = this.base_url;\n    try {\n      const response = await axios.get(\n        `?key=${this.api_key}&q=${this.searchQuery}&image_type=photo&orientation=horizontal&page=${this.page}&per_page=12`,\n      );\n      return response.data;\n    } catch (err) {\n      return toast.error(`Something went wrong  ${err}`, { toastId: uuid() });\n    }\n  }\n}\n\nexport default FetchPhotos;\n","import PropTypes from 'prop-types';\n\nfunction ImageGalleryItem({ openModal, getImage, largeImage, preiew, desc }) {\n  function onItemClick(e) {\n    openModal();\n    getImage(e);\n  }\n\n  return (\n    <li className=\"ImageGalleryItem\" onClick={onItemClick}>\n      <img\n        className=\"ImageGalleryItem-image\"\n        src={preiew}\n        data-source={largeImage}\n        alt={desc}\n      />\n    </li>\n  );\n}\n\nImageGalleryItem.default = {\n  preiew:\n    'https://dummyimage.com/280x150/2a2a2a/ffffff&text=Product+image+placeholder',\n  largeImage:\n    'https://dummyimage.com/640x480/2a2a2a/ffffff&text=Product+image+placeholder',\n};\n\nImageGalleryItem.propTypes = {\n  openModal: PropTypes.func,\n  getImage: PropTypes.func,\n  largeImage: PropTypes.string,\n  preiew: PropTypes.string,\n  desc: PropTypes.string,\n};\n\nexport default ImageGalleryItem;\n","import PropTypes from 'prop-types';\n\nfunction Button({ loadMore }) {\n  return (\n    <button className=\"Button\" type=\"button\" onClick={loadMore}>\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  loadMore: PropTypes.func,\n};\n\nexport default Button;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\n\nexport class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleEscape);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleEscape);\n  }\n\n  handleEscape = e => {\n    if (e.code === 'Escape') {\n      this.props.switcher();\n    }\n  };\n\n  handleClose = e => {\n    if (e.currentTarget === e.target) {\n      this.props.switcher();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleClose}>\n        <div className=\"Modal\">{this.props.children}</div>\n      </div>,\n      document.getElementById('modalRoot'),\n    );\n  }\n}\n\nexport default Modal;\n","import { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport { v1 as uuid } from 'uuid';\nimport Loader from 'react-loader-spinner';\nimport PropTypes from 'prop-types';\nimport FetchPhotos from '../../services/pixabay';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport Button from '../Button';\nimport Modal from '../Modal';\n\nconst newFetchPhotos = new FetchPhotos(\n  'https://pixabay.com/api/',\n  '23078743-735eb07845251e1f6bfe1c97b',\n);\n\nclass ImageGallery extends Component {\n  state = {\n    searchResults: [],\n    status: 'idle',\n    error: null,\n    showModal: false,\n    activeImage: '',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevValue = prevProps.searchValue;\n    const currentValue = this.props.searchValue;\n\n    if (prevValue !== currentValue) {\n      this.setState({ status: 'pending' });\n      newFetchPhotos.page = 1;\n      newFetchPhotos.searchQuery = currentValue;\n      newFetchPhotos\n        .fetchPhotos()\n        .then(result => {\n          this.setState({\n            searchResults: result.hits,\n            status: 'resolve',\n          });\n          // if (this.state.searchResults.length === 0) {\n          //   toast.error('The request was rejected', {toastId: uuid()})\n          // }\n        })\n        .catch(err => {\n          this.setState({ error: err, status: 'error' });\n        });\n    }\n  }\n\n  loadMore = () => {\n    newFetchPhotos.page += 1;\n    newFetchPhotos.fetchPhotos().then(response => {\n      this.setState(prevState => ({\n        searchResults: [...prevState.searchResults, ...response.hits],\n      }));\n\n      window.scrollTo({\n        top: document.querySelector('.ImageGallery').scrollHeight,\n        behavior: 'smooth',\n      });\n    });\n  };\n\n  toggleModal = () => {\n    this.setState({\n      showModal: !this.state.showModal,\n    });\n  };\n\n  getTarget = e => {\n    this.setState({\n      activeImage: e.target.dataset.source,\n    });\n  };\n\n  render() {\n    const status = this.state.status;\n    const { toggleModal, getTarget, state, loadMore } = this;\n\n    if (status === 'idle') {\n      return <div></div>;\n    }\n\n    if (status === 'pending') {\n      return (\n        <Loader type=\"ThreeDots\" color=\"#3f51b5\" height={100} width={100} />\n      );\n    }\n\n    if (status === 'rejected') {\n      // toast.error('The request was rejected', {toastId: uuid()})\n      return (\n        <div className=\"info\">\n          <b>Opps, the request was rejected. Try again.</b>\n        </div>\n      );\n    }\n\n    if (status === 'resolve') {\n      if (this.state.searchResults.length === 0) {\n        // toast.error('Sorry, no matches was found', {toastId: uuid()})\n        return (\n          <div className=\"info\">\n            <b>Sorry, no matches was found</b>\n          </div>\n        );\n      }\n\n      return (\n        <>\n          <ul className=\"ImageGallery\">\n            {this.state.searchResults.map(\n              ({ id, webformatURL, largeImageURL, tags }) => {\n                return (\n                  <ImageGalleryItem\n                    key={id}\n                    preiew={webformatURL}\n                    largeImage={largeImageURL}\n                    openModal={toggleModal}\n                    getImage={getTarget}\n                    desc={tags}\n                  />\n                );\n              },\n            )}\n          </ul>\n\n          <Button loadMore={loadMore} />\n\n          {state.showModal && (\n            <Modal switcher={toggleModal}>\n              <img className=\"modalImage\" src={state.activeImage} alt=\"\" />\n            </Modal>\n          )}\n        </>\n      );\n    }\n  }\n}\n\nImageGallery.propTypes = {\n  searchValue: PropTypes.string,\n};\n\nexport default ImageGallery;\n","import { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport { Component } from 'react';\nimport './App.css';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\n\nclass App extends Component {\n  state = {\n    searchValue: '',\n  };\n\n  handleSubmit = value => {\n    this.setState({\n      searchValue: value,\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.handleSubmit} />\n        <ImageGallery searchValue={this.state.searchValue} />\n        <ToastContainer />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}