(this["webpackJsonpreact-2"]=this["webpackJsonpreact-2"]||[]).push([[0],{31:function(e,t,a){},34:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(8),s=a.n(c),o=(a(31),a(4)),i=a(5),u=a(7),l=a(6),h=a(9),d=(a(32),a(33),a(34),a(1)),p=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={searchValue:""},e.getSearchValue=function(t){e.setState({searchValue:t.target.value})},e.submitSearchValue=function(t){t.preventDefault(),e.props.onSubmit(e.state.searchValue),e.reset()},e.reset=function(){e.setState({searchValue:""})},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(d.jsx)("header",{className:"Searchbar",children:Object(d.jsxs)("form",{className:"SearchForm",onSubmit:this.submitSearchValue,children:[Object(d.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(d.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(d.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.searchValue,onChange:this.getSearchValue})]})})}}]),a}(r.Component),m=p,b=a(15),j=a(24),f=a.n(j),g=a(13),v=a.n(g),O=a(25),y=a(14),x=a.n(y),w=a(76),S=function(){function e(t,a){Object(o.a)(this,e),this.base_url=t,this.api_key=a,this._searchQuery="",this._page=1}return Object(i.a)(e,[{key:"searchQuery",get:function(){return this._searchQuery},set:function(e){return this._searchQuery=e}},{key:"page",get:function(){return this._page},set:function(e){return this._page=e}},{key:"fetchPhotos",value:function(){var e=Object(O.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.a.defaults.baseURL=this.base_url,e.prev=1,e.next=4,x.a.get("?key=".concat(this.api_key,"&q=").concat(this.searchQuery,"&image_type=photo&orientation=horizontal&page=").concat(this.page,"&per_page=12"));case 4:return t=e.sent,e.abrupt("return",t.data);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",h.b.error("Something went wrong  ".concat(e.t0),{toastId:Object(w.a)()}));case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),k=S;function I(e){var t=e.openModal,a=e.getImage,r=e.largeImage,n=e.preiew,c=e.desc;return Object(d.jsx)("li",{className:"ImageGalleryItem",onClick:function(e){t(),a(e)},children:Object(d.jsx)("img",{className:"ImageGalleryItem-image",src:n,"data-source":r,alt:c})})}I.default={preiew:"https://dummyimage.com/280x150/2a2a2a/ffffff&text=Product+image+placeholder",largeImage:"https://dummyimage.com/640x480/2a2a2a/ffffff&text=Product+image+placeholder"};var M=I;var N=function(e){var t=e.loadMore;return Object(d.jsx)("button",{className:"Button",type:"button",onClick:t,children:"Load more"})},V=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).handleEscape=function(t){"Escape"===t.code&&e.props.switcher()},e.handleClose=function(t){t.currentTarget===t.target&&e.props.switcher()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleEscape)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleEscape)}},{key:"render",value:function(){return Object(c.createPortal)(Object(d.jsx)("div",{className:"Overlay",onClick:this.handleClose,children:Object(d.jsx)("div",{className:"Modal",children:this.props.children})}),document.getElementById("modalRoot"))}}]),a}(r.Component),_=V,C=new k("https://pixabay.com/api/","23078743-735eb07845251e1f6bfe1c97b"),R=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={searchResults:[],status:"idle",error:null,showModal:!1,activeImage:""},e.loadMore=function(){C.page+=1,C.fetchPhotos().then((function(t){e.setState((function(e){return{searchResults:[].concat(Object(b.a)(e.searchResults),Object(b.a)(t.hits))}})),window.scrollTo({top:document.querySelector(".ImageGallery").scrollHeight,behavior:"smooth"})}))},e.toggleModal=function(){e.setState({showModal:!e.state.showModal})},e.getTarget=function(t){e.setState({activeImage:t.target.dataset.source})},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,r=e.searchValue,n=this.props.searchValue;r!==n&&(this.setState({status:"pending"}),C.page=1,C.searchQuery=n,C.fetchPhotos().then((function(e){a.setState({searchResults:e.hits,status:"resolve"})})).catch((function(e){a.setState({error:e,status:"error"})})))}},{key:"render",value:function(){var e=this.state.status,t=this.toggleModal,a=this.getTarget,r=this.state,n=this.loadMore;return"idle"===e?Object(d.jsx)("div",{}):"pending"===e?Object(d.jsx)(f.a,{type:"ThreeDots",color:"#3f51b5",height:100,width:100}):"rejected"===e?Object(d.jsx)("div",{className:"info",children:Object(d.jsx)("b",{children:"Opps, the request was rejected. Try again."})}):"resolve"===e?0===this.state.searchResults.length?Object(d.jsx)("div",{className:"info",children:Object(d.jsx)("b",{children:"Sorry, no matches was found"})}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("ul",{className:"ImageGallery",children:this.state.searchResults.map((function(e){var r=e.id,n=e.webformatURL,c=e.largeImageURL,s=e.tags;return Object(d.jsx)(M,{preiew:n,largeImage:c,openModal:t,getImage:a,desc:s},r)}))}),Object(d.jsx)(N,{loadMore:n}),r.showModal&&Object(d.jsx)(_,{switcher:t,children:Object(d.jsx)("img",{className:"modalImage",src:r.activeImage,alt:""})})]}):void 0}}]),a}(r.Component),E=R,F=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={searchValue:""},e.handleSubmit=function(t){e.setState({searchValue:t})},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(m,{onSubmit:this.handleSubmit}),Object(d.jsx)(E,{searchValue:this.state.searchValue}),Object(d.jsx)(h.a,{})]})}}]),a}(r.Component),L=F;s.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(L,{})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.3150c523.chunk.js.map